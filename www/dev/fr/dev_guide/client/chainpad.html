

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="fr" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="fr" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ChainPad et Listmap &mdash; Documentation CryptPad 3.23.0</title>
  

  
  <link rel="icon" type="image/png" href="../../_static/images/main-favicon.png" id="favicon"/>
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/open-sans.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/cptools.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/fontawesome.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/cp-overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Recherche" href="../../search.html" />
    <link rel="next" title="Utiliser les clés de traduction" href="translations.html" />
    <link rel="prev" title="Architecture client" href="architecture.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          
            <a href="../../index.html" class="icon icon-home">
              <img src="../../_static/images/sidebar-logo.png" class="logo" alt="Logo"/>
              <div class="icon-title">CryptPad</div>
              <span class="release">3.23.0</span>
            </a>
            
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
          
        </div>

        <div class="wy-side-nav-language-selector">
        	<p class="caption-text">
	        	<select id="language-selector-container">
	        		<option value="en">English</option>
              <option value="fr">Français</option>
              <option value="de">Deutsch</option>
	        	</select>
        	</p>
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/index.html">Guide Utilisateur</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/instances.html">Instances CryptPad</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/user_account.html">Compte utilisateur</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/user_account.html#account-types">Types de comptes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/user_account.html#non-registered-user">Utilisateur non-enregistré</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/user_account.html#logged-in-user">Utilisateur enregistré</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/user_account.html#premium-user">Utilisateur abonné</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/user_account.html#account-management">Gestion du compte</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/user_account.html#registration">Inscription</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/user_account.html#logging-in">Connexion</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/user_account.html#settings">Préférences</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/user_account.html#account">Compte</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/user_account.html#confidentiality">Confidentialité</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/user_account.html#cryptdrive">CryptDrive</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/user_account.html#cursor">Curseur</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/user_account.html#rich-text">Documents texte</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/user_account.html#code">Code</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/user_account.html#subscription">Abonnement</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/user_account.html#support">Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/user_account.html#notifications">Notifications</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/security.html">Sécurité</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/security.html#passwords-for-documents-and-folders">Mot de passe des documents et dossiers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/security.html#remote-disconnect">Déconnexion à distance</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/drive.html">Drive</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/drive.html#display">Affichage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/drive.html#managing-documents">Gestion des documents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/drive.html#folders">Dossiers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/drive.html#renaming">Renommer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/drive.html#deleting">Supprimer</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/drive.html#cryptdrive-history">Historique du CryptDrive</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/drive.html#tags">Mots-Clés</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/drive.html#templates">Modèles</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/collaboration.html">Collaboration / Social</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/collaboration.html#profile">Profil</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/collaboration.html#personal-profile">Profil personnel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/collaboration.html#user-profile">Profil utilisateur</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/collaboration.html#contacts">Contacts</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/collaboration.html#add-a-contact">Ajouter un contact</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/collaboration.html#manage-contacts">Gérer les contacts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/collaboration.html#chat-with-contacts">Chat avec les contacts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/collaboration.html#teams">Équipes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/collaboration.html#team-drive">Drive d'équipe</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/collaboration.html#team-members">Membres</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/collaboration.html#invite-members">Inviter des membres</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/collaboration.html#roles-and-permissions">Rôles et permissions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/collaboration.html#administration">Administration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/collaboration.html#chat">Chat</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/collaboration.html#administration-tab">Onglet Administration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/share_and_access.html">Partage / Accès</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/share_and_access.html#share">Partager</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/share_and_access.html#access-rights">Droits d'accès</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/share_and_access.html#sharing-with-contacts">Partager avec des contacts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/share_and_access.html#sharing-a-link">Partager un lien</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/share_and_access.html#embedding">Intégration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/share_and_access.html#shared-folders">Dossiers partagés</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/share_and_access.html#access">Accès</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/share_and_access.html#access-tab">Onglet Accès</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/share_and_access.html#access-list">Liste</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/share_and_access.html#owners">Propriétaires</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide/applications.html">Applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/apps/general.html">Général</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/general.html#new-document">Nouveau document</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/general.html#saving">Sauvegarde</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/general.html#make-a-copy">Faire une copie</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/general.html#document-history">Historique des documents</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/general.html#snapshots">Captures</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/general.html#properties">Propriétés</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/general.html#users-and-chat">Utilisateurs et Chat</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/apps/richtext.html">Documents texte</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/richtext.html#toolbar">Barre d'outils</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/richtext.html#import-export">Import/Export</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/richtext.html#comments">Commentaires</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/apps/sheets.html">Tableur</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/sheets.html#documentation">Documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/sheets.html#history">Historique</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/sheets.html#import-export">Import/Export</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/apps/code.html">Code / Markdown</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/code.html#toolbar">Barre d'outils</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/code.html#theme">Thème</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/code.html#import-export">Import/Export</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/code.html#markdown">Markdown</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/code.html#images">Images</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/code.html#lightbox">Galerie</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/apps/slides.html">Présentation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/slides.html#toolbar">Barre d'outils</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/slides.html#writing-slides-with-markdown">Rédaction en Markdown</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/slides.html#theme">Thème</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/slides.html#import-export">Import/Export</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/slides.html#images">Images</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/slides.html#lightbox">Galerie</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/apps/poll.html">Sondage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/poll.html#toolbar">Barre d'outils</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/poll.html#edit-mode">Édition</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/poll.html#voting">Vote</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/poll.html#export">Export</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/apps/kanban.html">Kanban</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/kanban.html#organisation">Organisation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/kanban.html#columns">Colonnes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/kanban.html#cards">Cartes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/kanban.html#card-editor">Éditeur de carte</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/kanban.html#display">Affichage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/kanban.html#import-export">Import/Export</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../user_guide/apps/whiteboard.html">Dessin</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/whiteboard.html#toolbar">Barre d'outils</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/whiteboard.html#drawing">Dessiner</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/whiteboard.html#paint-mode">Mode Pinceau</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/whiteboard.html#select-mode">Mode Sélection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../user_guide/apps/whiteboard.html#export">Export</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Developer Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../setup.html">Instance locale de développement</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../setup.html#prerequis">Prérequis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../setup.html#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../setup.html#configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../setup.html#cache-et-compilation-important">Cache et compilation (important)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../setup.html#lancement-en-mode-developpement">Lancement en mode développement</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../contribute.html">Contribuer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../contribute.html#licence">Licence</a></li>
<li class="toctree-l3"><a class="reference internal" href="../contribute.html#git">Git</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../contribute.html#pull-requests">Pull requests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../contribute.html#branches">Branches</a></li>
<li class="toctree-l4"><a class="reference internal" href="../contribute.html#avant-de-contribuer">Avant de contribuer</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../basics.html">Key elements in CryptPad</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../basics.html#zero-knowledge">Zero-knowledge</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics.html#content-security-policy-csp-and-security">Content Security Policy (CSP) and security</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics.html#customization">Customization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics.html#code-rules">Code rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../basics.html#translation-keys">Translation keys</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../code.html">Code</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../general.html">Généralités</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../general.html#les-urls-safe-et-unsafe">Les URLs “safe” et “unsafe”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../general.html#structure-en-5-niveaux">Structure en 5 niveaux</a></li>
<li class="toctree-l4"><a class="reference internal" href="../general.html#chiffrement">Chiffrement</a></li>
<li class="toctree-l4"><a class="reference internal" href="../general.html#drive-et-journal-de-pins">Drive et journal de “pins”</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../general.html#exemple">Exemple</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../general.html#inscription-connexion-et-block">Inscription, connexion et block</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../general.html#exemple-2">Exemple</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../general.html#communication-client-serveur-netflux">Communication client-serveur (Netflux)</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../general.html#cote-serveur">Côté serveur</a></li>
<li class="toctree-l5"><a class="reference internal" href="../general.html#cote-client">Côté client</a></li>
<li class="toctree-l5"><a class="reference internal" href="../general.html#exemple-3">Exemple</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3 current"><a class="reference internal" href="../client.html">Client</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="architecture.html">Architecture client</a><ul>
<li class="toctree-l5"><a class="reference internal" href="architecture.html#worker">Worker</a></li>
<li class="toctree-l5"><a class="reference internal" href="architecture.html#outer">Outer</a></li>
<li class="toctree-l5"><a class="reference internal" href="architecture.html#inner">Inner</a></li>
</ul>
</li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">ChainPad et Listmap</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#chainpad">ChainPad</a></li>
<li class="toctree-l5"><a class="reference internal" href="#checkpoints">Checkpoints</a></li>
<li class="toctree-l5"><a class="reference internal" href="#chainpad-avec-des-objets">ChainPad avec des objets</a></li>
<li class="toctree-l5"><a class="reference internal" href="#chainpad-netflux">Chainpad-netflux</a></li>
<li class="toctree-l5"><a class="reference internal" href="#listmap">Listmap</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="translations.html">Utiliser les clés de traduction</a><ul>
<li class="toctree-l5"><a class="reference internal" href="translations.html#utilisation">Utilisation</a></li>
<li class="toctree-l5"><a class="reference internal" href="translations.html#structure">Structure</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="framework.html">Framework</a><ul>
<li class="toctree-l5"><a class="reference internal" href="framework.html#www-common-sframe-app-outer-js">www/common/sframe-app-outer.js</a></li>
<li class="toctree-l5"><a class="reference internal" href="framework.html#www-common-sframe-app-framework-js">www/common/sframe-app-framework.js</a></li>
<li class="toctree-l5"><a class="reference internal" href="framework.html#customize-dist-src-less2-include-framework-less">customize.dist/src/less2/include/framework.less</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="worker.html">Worker</a><ul>
<li class="toctree-l5"><a class="reference internal" href="worker.html#async-store-js-et-modules">async-store.js et modules</a></li>
<li class="toctree-l5"><a class="reference internal" href="worker.html#commandes-de-lobjet-store">Commandes de l’objet “Store”</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="outer.html">Outer</a><ul>
<li class="toctree-l5"><a class="reference internal" href="outer.html#communication-entre-les-niveaux">Communication entre les niveaux</a></li>
<li class="toctree-l5"><a class="reference internal" href="outer.html#communication-avec-inner-sframe-common-outer">Communication avec inner - sframe-common-outer</a></li>
<li class="toctree-l5"><a class="reference internal" href="outer.html#communication-avec-le-worker-cryptpad-common">Communication avec le worker - cryptpad-common</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="inner.html">Inner</a><ul>
<li class="toctree-l5"><a class="reference internal" href="inner.html#fonctionnement">Fonctionnement</a></li>
<li class="toctree-l5"><a class="reference internal" href="inner.html#metadata-manager">metadata-manager</a></li>
<li class="toctree-l5"><a class="reference internal" href="inner.html#modules-dinterface">Modules d’interface</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../admin_guide/index.html">Guide Administrateur (en cours)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how_to_contribute.html">Comment contribuer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../how_to_contribute.html#spread-the-word">Diffuser</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to_contribute.html#report-bugs">Signaler des bugs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to_contribute.html#translate-cryptpad">Traduire CryptPad</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to_contribute.html#contribute-to-the-code">Contribuer au code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to_contribute.html#financial-support">Soutien financier</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

	<!-- start top banner area (for fundraisers or messages)

	<div style="text-align: center; background-color: #333">
		<a href="https://krita.org/en/fundraising-2018-campaign/" target="_self" onclick="ga('send', 'event', 'frontpage', 'button', 'Fundraiser 2018');">
			<img src="https://krita.org/wp-content/themes/krita-org-theme/images/decoration/2018-fundraiser-banner.png" style="max-width: 100%">
		</a>
	</div>
	
	 end top banner area -->

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">CryptPad</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Index</a> &raquo;</li>
        
          <li><a href="../index.html">Developer Guide</a> &raquo;</li>
        
          <li><a href="../code.html">Code</a> &raquo;</li>
        
          <li><a href="../client.html">Client</a> &raquo;</li>
        
      <li>ChainPad et Listmap</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/dev_guide/client/chainpad.rst.txt" rel="nofollow"> 
             
              <img src="../../_static/images/source-code.png" />
             <!-- View page source -->

          </a>
          
        
      </li>
    
  </ul>

  
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="chainpad-et-listmap">
<h1>ChainPad et Listmap<a class="headerlink" href="#chainpad-et-listmap" title="Lien permanent vers ce titre">¶</a></h1>
<p>Dans la base de données, les document collaboratifs (c’est-à-dire les
documents qui ne sont pas des fichiers statiques uploadés par
l’utilisateur) sont stockés sous forme de “patchs” chiffrés qui
permettent de reconstruire le document depuis un point de départ. Cette
gestion des patchs est effectuée grâce à notre librairie
<a class="reference external" href="https://github.com/xwiki-contrib/chainpad">ChainPad</a>.</p>
<div class="section" id="chainpad">
<h2>ChainPad<a class="headerlink" href="#chainpad" title="Lien permanent vers ce titre">¶</a></h2>
<p>ChainPad est ce qu’on pourrait appeler la base du “moteur temps-réel” de
CryptPad. En partant d’un même point de départ fixe (qui peut être
vide), plusieurs utilisateurs peuvent ouvrir un même document. ChainPad
travaille exclusivement avec des documents au format “texte” en théorie,
mais des solutions existent en pratique pour d’autres formats de données
JavaScript.</p>
<p>Chaque utilisateur initialise donc un “objet” chainpad local, auquel on
fournit tout l’historique des patchs de la base de données depuis un
point de départ donné. Les patchs contiennent un ensemble d’opérations
simples à effectuer sur le document (retirer X caractères et ajouter les
caractères “abc” à la position Y) ainsi qu’un “parent”. Stocker un
identifiant de parent dans le patch permet de toujours reconstruire le
document avec les patchs dans le bon ordre. L’ensemble des patchs depuis
un point de départ (chaîne vide en général) permet alors d’obtenir la
dernière version du document.</p>
<p>Une fois le document restauré grâce à l’historique, CryptPad va détecter
chaque changement effectué dans l’application afin de générer une
nouvelle version “locale” du document et va fournir cette version à
ChainPad. ChainPad va alors l’analyser afin de trouver les “différences”
entre la nouvelle version et la version précédente. Ces différences vont
permettre de <strong>créer un nouveau “patch”</strong> qui va être chiffré par
CryptPad et envoyé aux autres utilisateurs et stocké dans la base de
données.</p>
<p>Lors de la <strong>réception d’un patch</strong> en temps-réel d’un autre
utilisateur, ChainPad va essayer de l’intégrer au document courant. Si
des modifications non-sauvegardées (patch pas encore créé) sont en cours
par l’utilisateur actuel, ChainPad va d’abord fusionner les changements
locaux avec le patch distant avant d’insérer le contenu à jour dans
l’interface. Cette fusion permet aux utilisateurs de pouvoir effectuer
de nombreuses modifications en simultané sans perdre de caractères dans
le contenu.</p>
<p>ChainPad possède aussi des outils permettant de <strong>gérer les conflits</strong>.
Il connaît l’ordre des patchs grâce au parent mais, à cause du temps
nécessaire pour que les autres utilisateurs reçoivent un message, cela
n’empêche pas que deux patchs soient envoyés en même temps par deux
utilisateurs différents. Ces 2 patchs auront le même “patch” parent et
vont donc créer une “branche” dans l’arborescence des patchs. Comme les
patchs sont chiffrés, le serveur ne peut décider par lui-même comment
résoudre ces conflits, c’est donc ChainPad qui va devoir s’en occuper
dans le navigateur de chaque utilisateur. Il faut alors s’assurer que le
résultat obtenu en “fusionnant” ces 2 patchs soient identiques chez tous
les clients. Pour cela, ChainPad se base notamment sur l’ordre des
messages reçus par le serveur. Deux patchs peuvent avoir le même parent
mais cela n’empêche pas que l’un des deux arrivera forcément en premier
au niveau du serveur. La technologie WebSocket garantit que les messages
transmis par le serveur aux différents clients arrivent dans l’ordre
dans lequel le serveur les a envoyés. Les ChainPad de tous les
utilisateurs connaissent donc les patchs ayant le même parent et l’ordre
dans lequel les traiter, ce qui est suffisant pour obtenir le même
résultat partout.</p>
<p>Tous ces systèmes sont gérés automatiquement en interne, mais il est
important de les connaître un minimum afin de pouvoir utiliser ChainPad
de manière optimale. Les intéractions entre CryptPad et ChainPad sont
résumées en :</p>
<ul class="simple">
<li><p>Fournir des patchs distants à ChainPad</p></li>
<li><p>Indiquer à ChainPad tous les changements effectués localement</p></li>
<li><p>Recevoir de ChainPad des patchs liés aux changements locaux</p></li>
<li><p>Récupérer l’état actuel du document ChainPad</p>
<ul>
<li><p>État commun à tous les utilisateurs, appelé “authDoc”</p></li>
<li><p>État local (pas encore sauvé/envoyé), appelé “userDoc”</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="checkpoints">
<h2>Checkpoints<a class="headerlink" href="#checkpoints" title="Lien permanent vers ce titre">¶</a></h2>
<p>Afin de ne pas avoir à synchroniser l’historique complet du document
depuis sa création à chaque chargement d’un document collaboratif,
ChainPad utilise un système de “checkpoints”. Tous les 50 patchs stockés
dans la base de données, l’utilisateur créant le patch va en réalité
créer un patch spécial appelé “checkpoint”. Ce patch est défini par une
unique opération qui efface tout le document et le réinsère en même
temps. Les checkpoints ont la particularité de pouvoir être utilisés
comme points de départ pour le système. Les checkpoints ont également un
marquage spécial ajouté après le chiffrement qui permet au serveur de
les identifier comme tel.</p>
<p>Lorsqu’un utilisateur charge un document existant et demande
l’historique, le serveur va ainsi uniquement envoyer tous les patchs en
partant de l’avant-dernier checkpoint (en théorie le dernier checkpoint
est suffisant, mais l’avant-dernier permet de résoudre plus facilement
certains problèmes). Ce système permet donc de gagner significativement
en temps de chargement pour les documents qui sont fortement utilisés
sur le long terme. Il permet également aux propriétaires des pads de
pouvoir supprimer l’historique ancien en ne gardant dans la base de
données que les messages à partir des 2 derniers checkpoints.</p>
</div>
<div class="section" id="chainpad-avec-des-objets">
<h2>ChainPad avec des objets<a class="headerlink" href="#chainpad-avec-des-objets" title="Lien permanent vers ce titre">¶</a></h2>
<p>Comme indiqué précédemment, ChainPad fonctionne à la base sur des
documents texte. Cela signifie que les seules opérations qu’il peut
effectuer concerne l’ajout ou la suppression de caractères à une
position donnée par rapport au début du document. Il ne peut donc pas
travailler avec des objets ou des arrays directement, en utilisant par
exemple une opération demandant de changer le 3ème élément d’un Array.</p>
<p>Dans CryptPad, beaucoup d’applications nécessitent toutefois de
travailler avec des objets ou des arrays. Dans l’application “code”,
cela permet notamment de stocker le titre du document et son contenu en
même temps. Dans le drive, cela est plus flagrant car la structure même
du drive avec son organisation en dossiers peut être facilement
représentée sous forme d’arbre dans un objet JavaScript.</p>
<p>Une <strong>solution basique</strong> consisterait à dire qu’il suffit de travailler
dans ChainPad avec la représentation en chaine de caractères de l’objet
(avec <code class="docutils literal notranslate"><span class="pre">JSON.stringify</span></code>) et de retransformer en objet une fois le
travail de ChainPad effectué (avec <code class="docutils literal notranslate"><span class="pre">JSON.parse</span></code>). Le problème avec ce
genre de solution est que la gestion des conflits risque de détruire le
document !</p>
<p>Exemple : Le document est un array sous forme de chaîne
<code class="docutils literal notranslate"><span class="pre">[\&quot;a\&quot;,\&quot;b\&quot;,\&quot;c\&quot;]</span></code>. Un 1er utilisateur veut supprimer le 3ème
élement de l’array et un 2nd utilisateur veut remplacer cet élément par
“d”. Le premier patch va indiquer de supprimer <code class="docutils literal notranslate"><span class="pre">,\&quot;c\&quot;</span></code> et le second
de supprimer <code class="docutils literal notranslate"><span class="pre">c</span></code> et d’ajouter <code class="docutils literal notranslate"><span class="pre">d</span></code>. Les deux opérations sont
incompatibles en tant qu’Array, mais en texte un résultat est évident,
il s’agit de supprimer tout ce qui a été supprimé par le premier
utilisateur et d’ajouter <code class="docutils literal notranslate"><span class="pre">d</span></code> à la place car les deux utilisateurs sont
d’accord pour supprimer <code class="docutils literal notranslate"><span class="pre">c</span></code>. Le résultat final serait alors
<code class="docutils literal notranslate"><span class="pre">[\&quot;a\&quot;,\&quot;b\&quot;d]</span></code>, ce qui ne pourrait plus être retransformer en array
avec <code class="docutils literal notranslate"><span class="pre">JSON.parse</span></code>.</p>
<p>Pour résoudre ce problème, il est possible de fournir à une instance de
ChainPad (lors de son initialisation) un <strong>algorithme spécifique pour
gérer les conflits</strong>, ainsi qu’un <strong>algorithme pour valider un patch</strong>.
Lorsque l’on souhaite travailler avec un objet, pour qu’un patch soit
valide il faut que <code class="docutils literal notranslate"><span class="pre">JSON.parse()</span></code> ne génère pas d’erreur. Si ce n’est
pas le cas, le patch est tout simplement ignoré. De la même manière, un
algorithme de gestion des conflits spécifique a été créé pour travailler
avec des objets ou des arrays. Cet algorithme s’assurerait que l’exemple
précédent fournisse soit <code class="docutils literal notranslate"><span class="pre">[\&quot;a\&quot;,\&quot;b\&quot;]</span></code> ou soit
<code class="docutils literal notranslate"><span class="pre">[\&quot;a\&quot;,\&quot;b\&quot;,\&quot;d\&quot;]</span></code> afin de garder un résultat valide.</p>
<p>Chaque instance de ChainPad ne travaille qu’avec un seul document et il
convient donc de l’initialiser avec les bons algorithmes.</p>
</div>
<div class="section" id="chainpad-netflux">
<h2>Chainpad-netflux<a class="headerlink" href="#chainpad-netflux" title="Lien permanent vers ce titre">¶</a></h2>
<p>ChainPad permet donc de gérer des patchs, que ce soit pour les intégrer
au document local ou pour générer des patchs depuis le document local.
Pour fonctionner complètement dans un système temps-réel, il manque
alors la partie qui va chiffrer ces patchs, et surtout la partie qui va
communiquer avec le serveur pour transmettre ces patchs aux autres
utilisateurs. Pour cela, une librairie
<a class="reference external" href="https://github.com/xwiki-labs/chainpad-netflux/">chainpad-netflux</a> a
été créée.</p>
<p>Ce guide explique le protocole Netflux utilisé par CryptPad pour
communiquer avec le serveur. Une implémentation WebSocket client et
serveur a été réalisée. La librairie chainpad-netflux permet de
connecter une instance chainpad avec cette implémentation Netflux côté
client.</p>
<p>Chainpad-netflux est ainsi initialisée principalement avec un
“channelId” correspondant au document collaboratif souhaité, un module
“crypto” contenant une fonction pour chiffrer et une fonction pour
déchiffrer qui utilisent les clés correspondant au document souhaité, et
une adresse pour se connecter au serveur. Beaucoup d’autres options sont
possibles ou requises, elles sont détaillées sur la page Github de la
librairie et dans le code.</p>
<p>Cette librairie va alors automatiquement initialiser la connexion
Websocket avec le serveur. Elle va ensuite :</p>
<ul class="simple">
<li><p>Rejoindre le “salon” correspondant au document souhaité (avec le
channelId fourni)</p></li>
<li><p>Créer une instance ChainPad</p></li>
<li><p>Demander l’historique au serveur</p></li>
<li><p>Déchiffrer les messages de l’historique</p></li>
<li><p>Remplir ChainPad avec l’historique déchiffré</p></li>
</ul>
<p>Les autres champs de configuration de chainpad-netflux permettent alors
d’intéragir avec l’instance chainpad et d’écouter des évènements
spécifiques. Chainpad-netflux envoie ainsi des évènements dés que des
patchs distants sont reçus, lors de changements dans la liste
d’utilisateurs ou lors d’une déconnexion au réseau. Elle donne accès à
l’instance ChainPad qui permet de récupérer l’état actuel du document et
d’indiquer tout changement effectué au document. Dés que ChainPad génère
un patch, celui-ci est chiffré par la librairie et envoyé au serveur
automatiquement.</p>
</div>
<div class="section" id="listmap">
<h2>Listmap<a class="headerlink" href="#listmap" title="Lien permanent vers ce titre">¶</a></h2>
<p>Un cas d’utilisation de ChainPad qui est souvent utilisé dans CryptPad
correspond à la collaboration sur des données stockées dans un objet
JavaScript. Une librairie
<a class="reference external" href="https://github.com/xwiki-labs/chainpad-listmap/">chainpad-listmap</a> a
ainsi été développée pour répondre à ce besoin de manière très simple.
Celle-ci est basée sur l’utilisation de “Proxy” JavaScript.</p>
<p>Les “Proxy” sont une extension des objets et arrays classiques de
JavaScript qui permettent notamment d’écouter tous les changements
effectués sur l’objet (ajout, suppression ou modification d’un élément).
On peut en particulier exécuter du code à chaque changement effectué, ce
qui permet dans notre cas de lier notre Proxy à une instance ChainPad.
Chaque changement effectué sur l’objet va ainsi être rapporté à
ChainPad, qui va analyser les différences par rapport à la version
précédente et créer un patch.</p>
<p>Cette librairie intègre donc chainpad-netflux, détaillée précédemment,
qui permet d’obtenir une instance chainpad directement connectée au
serveur et qui gère le chiffrement. Pour utiliser chainpad-listmap, il
faut donc fournir une configuration similaire à celle de
chainpad-netflux : un “channelId” pour le document a récupérer, des
fonctions de chiffrement/déchiffrement pour le document et une adresse
de connexion au serveur. chainpad-listmap retourne alors directement un
Proxy. Le Proxy peut être utilisé comme n’importe quel objet JavaScript
et changer son contenu de n’importe quelle manière va automatiquement
propager ces changements aux autres utilisateurs. Des évènements sont
déclenchés sur cet objets afin de prévenir le code utilisant la
librairie de divers éléments : “ready” quand l’historique est
synchronisé, “change” quand un élément est ajouté ou modifié, “remove”
quand un élément est supprimé ainsi que “disconnect” et “reconnect” pour
les problèmes du réseau.</p>
<p><strong>Chainpad-listmap permet donc d’initialiser un objet JavaScript
synchronisé entre plusieurs utilisateurs.</strong></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Le <strong>compte utilisateur</strong> (contenant le drive), les <strong>dossiers partagés</strong> et les <strong>équipes</strong> sont tous utilisés et stockés sous forme de document chainpad-listmap.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="translations.html" class="btn btn-neutral float-right" title="Utiliser les clés de traduction" accesskey="n" rel="next"> <!-- Next --> <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="architecture.html" class="btn btn-neutral" title="Architecture client" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> <!-- Previous  -->  </a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, CryptPad Team.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a modified <a href="https://github.com/rtfd/sphinx_rtd_theme">RTD theme</a>.<br/>
  <a href="https://cryptpad.fr" title="CryptPad flagship instance">CryptPad flagship instance</a> |
  <a href="#" title="The Gitlab instance to edit this pages and collaborate.">Git repository for docs.cryptpad.fr </a>
  . 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'3.23.0',
            LANGUAGE:'fr',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/language_data.js"></script>
      <script type="text/javascript" src="../../_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script> 

</body>
</html>